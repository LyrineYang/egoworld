{
  "num_gpus": 4,
  "parquet": {
    "compression": "zstd",
    "row_group_size": 268435456,
    "data_page_size": 8388608,
    "partition": ["run_id", "video_id", "clip_id"]
  },
  "backpressure": {
    "max_in_flight_cpu": 8,
    "max_in_flight_gpu": 8,
    "max_in_flight_write": 8
  },
  "retry": {
    "max_retries": 3,
    "base_delay_s": 5.0,
    "backoff": 3.0
  },
  "scenedetect": {
    "method": "scenedetect",
    "min_scene_len_s": 1.0,
    "fallback_full_clip": true,
    "overlap_s": 1.0
  },
  "coordinates": {
    "spec_version": "v1",
    "time_base": "seconds",
    "mask_encoding": "rle",
    "length_unit": "meters",
    "handedness": "right",
    "quat_order": "wxyz",
    "frame_index_base": 0,
    "axis_order": "x,y,z",
    "coord_frame": "camera"
  },
  "metrics": {
    "gpu_util_min": 0.6,
    "gpu_util_window_s": 600,
    "failure_rate_max": 0.01,
    "empty_mask_rate_max": 0.2
  },
  "paths": {
    "data_root": "./data",
    "output_root": "./output",
    "manifest_path": "./manifests",
    "state_db_path": "./state/pipeline.db",
    "runlog_path": "./runlog.md"
  },
  "operators": {
    "sam2": {
      "enabled": true,
      "params": {
        "checkpoint": "./models/sam2/sam2_small.pt",
        "config": "./models/sam2/sam2_small.yaml",
        "device": "cuda",
        "precision": "bf16",
        "vos_optimized": true,
        "prompting": {
          "source": "groundingdino",
          "prompt_interval_s": 2.0,
          "max_prompts_per_clip": 60,
          "max_boxes_per_frame": 6,
          "box_threshold": 0.35,
          "text_threshold": 0.25,
          "nms_iou": 0.5,
          "min_box_area": 256,
          "prompt_text": "hand . left hand . right hand . person hand . glove . utensil . knife . spoon . fork . spatula . ladle . tongs . cup . mug . bottle . bowl . plate . pan . pot . lid . cutting board . food . container . jar . can . package . bag . towel . sponge . soap . faucet . sink . stove . microwave . refrigerator . drawer . cabinet . phone . remote . key . pen . scissors"
        }
      }
    },
    "hamer": { "enabled": false, "params": { "model_path": "./models/hamer" } },
    "foundationpose": { "enabled": false, "params": { "model_path": "./models/foundationpose" } },
    "dex_retarget": { "enabled": false, "params": { "model_path": "./models/dex_retarget" } },
    "fast3r": {
      "enabled": false,
      "params": {
        "model_name_or_path": "jedyang97/Fast3R_ViT_Large_512",
        "image_size": 512,
        "dtype": "bf16",
        "max_views": 8,
        "frame_sampling": { "method": "uniform", "num_frames": 8, "stride": 4 }
      }
    }
  },
  "model_versions": {
    "sam2": "sam2.1_small",
    "hamer": "TBD",
    "foundationpose": "TBD",
    "dex_retarget": "TBD",
    "fast3r": "TBD"
  }
}
